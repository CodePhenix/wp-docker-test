(()=>{var e={942:(e,t)=>{var r;!function(){"use strict";var l={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=n(e,o(r)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)l.call(e,r)&&e[r]&&(t=n(t,r));return t}function n(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()}},t={};function r(l){var a=t[l];if(void 0!==a)return a.exports;var o=t[l]={exports:{}};return e[l](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var l in t)r.o(t,l)&&!r.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.blocks,t=window.React,l=window.wp.primitives,a=(0,t.createElement)(l.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(l.Path,{d:"M13 6v6h5.2v4c0 .8-.2 1.4-.5 1.7-.6.6-1.6.6-2.5.5h-.3v1.5h.5c1 0 2.3-.1 3.3-1 .6-.6 1-1.6 1-2.8V6H13zm-9 6h5.2v4c0 .8-.2 1.4-.5 1.7-.6.6-1.6.6-2.5.5h-.3v1.5h.5c1 0 2.3-.1 3.3-1 .6-.6 1-1.6 1-2.8V6H4v6z"})),o=window.wp.i18n,n=window.wp.blockEditor,c=window.wp.components,s=(0,t.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(l.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})),u=(0,t.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(l.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"}));var i=r(942),m=r.n(i);function p(e,t,r){e.className||(e.className=""),e.className=e.className.replace("wp-block-dsfr-"+t,void 0!==r?r:t),e.className=e.className.replace("wp-block","")}function d(e){try{new URL(e)}catch{return!1}return!0}function f(e){const r={"green-tilleul-verveine":(0,o.__)("Tilleul verveine","wp-dsfr-theme"),"green-bourgeon":(0,o.__)("Bourgeon","wp-dsfr-theme"),"green-emeraude":(0,o.__)("Émeraude","wp-dsfr-theme"),"green-menthe":(0,o.__)("Menthe","wp-dsfr-theme"),"green-archipel":(0,o.__)("Archipel","wp-dsfr-theme"),"blue-ecume":(0,o.__)("Écume","wp-dsfr-theme"),"blue-cumulus":(0,o.__)("Cumulus","wp-dsfr-theme"),"purple-glycine":(0,o.__)("Glycine","wp-dsfr-theme"),"pink-macaron":(0,o.__)("Macaron","wp-dsfr-theme"),"pink-tuile":(0,o.__)("Tuile","wp-dsfr-theme"),"yellow-tournesol":(0,o.__)("Tournesol","wp-dsfr-theme"),"yellow-moutarde":(0,o.__)("Moutarde","wp-dsfr-theme"),"orange-terre-battue":(0,o.__)("Terre battue","wp-dsfr-theme"),"brown-cafe-creme":(0,o.__)("Café crème","wp-dsfr-theme"),"brown-caramel":(0,o.__)("Caramel","wp-dsfr-theme"),"brown-opera":(0,o.__)("Opéra","wp-dsfr-theme"),"beige-gris-galet":(0,o.__)("Gris galet","wp-dsfr-theme")},l=[{label:(0,o.__)("Défaut","wp-dsfr-blocks"),value:""}];for(const e in r)l.push({label:r[e],value:e});return e=Object.assign({label:(0,o.__)("Couleur du bloc","wp-dsfr-blocks")},e,{options:l}),(0,t.createElement)(c.SelectControl,{...e})}const g=JSON.parse('{"UU":"dsfr/fr-quote"}');(0,e.registerBlockType)(g.UU,{icon:a,edit:function({attributes:e,setAttributes:r,isSelected:l}){const a={"fr-quote--column":e.displayImage};e.color&&(a["fr-quote--"+e.color]=!0);const i=(0,n.useBlockProps)({className:m()(a)});return p(i,"fr-quote"),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.InspectorControls,null,(0,t.createElement)(c.PanelBody,{title:(0,o.__)("Options","wp-dsfr-blocks"),initialOpen:!0},(0,t.createElement)(f,{label:(0,o.__)("Couleur du pictogramme","wp-dsfr-blocks"),value:e.color,onChange:e=>r({color:e})}),(0,t.createElement)(c.ToggleControl,{label:(0,o.__)("Afficher le portrait de l'auteur","wp-dsfr-blocks"),checked:e.displayImage,onChange:e=>{r({imageId:0,imageUrl:"",imageAlt:""}),r({displayImage:e})}}),(0,t.createElement)(c.RadioControl,{label:(0,o.__)("Taille de la citation","wp-dsfr-blocks"),selected:e.quoteSize,options:[{label:(0,o.__)("LG","wp-dsfr-blocks"),value:"lg"},{label:(0,o.__)("Défaut (XL)","wp-dsfr-blocks"),value:""}],onChange:e=>r({quoteSize:e})}),(0,t.createElement)(c.TextControl,{value:e.cite,label:(0,o.__)("Source","wp-dsfr-blocks"),onChange:e=>r({cite:e}),placeholder:"https://www.foo.com",type:"url",help:e.cite&&!d(e.cite)?(0,o.__)("Cette URL est invalide et ne sera pas intégrée au bloc","wp-dsfr-blocks"):(0,o.__)("Une URL qui désigne la source du document ou du message cité. Cet attribut est prévu pour signaler l'information expliquant le contexte ou la référence de la citation","wp-dsfr-blocks")}))),(0,t.createElement)("figure",{...i},(0,t.createElement)("blockquote",{cite:e.cite},(0,t.createElement)(n.RichText,{tagName:"p",className:e.quoteSize?"fr-text--"+e.quoteSize:"",placeholder:(0,o.__)("Citation","wp-dsfr-blocks"),value:e.quote,onChange:e=>r({quote:e}),allowedFormats:[]})),(0,t.createElement)("figcaption",null,(0,t.createElement)(n.RichText,{tagName:"p",className:"fr-quote__author",placeholder:(0,o.__)("Auteur","wp-dsfr-blocks"),value:e.author,onChange:e=>r({author:e}),allowedFormats:[]}),(0,t.createElement)("ul",{className:"fr-quote__source"},e.sources.map(((l,a)=>(0,t.createElement)(n.RichText,{key:a,tagName:"li",value:l,placeholder:(0,o.__)("Ajouter une source"),onChange:t=>{!function(t,l){const a=[...e.sources];a[l]=t,r({sources:a})}(t,a)},allowedFormats:["core/link"],disableLineBreaks:"false"}))),(0,t.createElement)("li",null,e.sources.length>1&&e.sources.filter((e=>!e)).length>0&&(0,t.createElement)(c.Button,{icon:s,label:(0,o.__)("Supprimer le(s) champ(s) source(s) vide(s)","wp-dsfr-blocks"),onClick:function(){const t=e.sources.filter((e=>!!e));0===t.length&&t.push(""),t.length!==e.sources.length&&r({sources:t})}}),(0,t.createElement)(c.Button,{icon:u,label:(0,o.__)("Ajouter un champ source","wp-dsfr-blocks"),onClick:function(){const t=[...e.sources];t.push(""),r({sources:t})}}))),e.displayImage&&(0,t.createElement)("div",{className:"fr-quote__image"},(0,t.createElement)(n.MediaUploadCheck,null,(0,t.createElement)(n.MediaUpload,{allowedTypes:["image"],onSelect:function(e){r({imageId:e.id,imageUrl:e?.sizes?.medium?.url?e.sizes.medium.url:e.url,imageAlt:e.alt})},value:e.imageId,render:({open:r})=>(0,t.createElement)(c.Button,{onClick:r},e.imageUrl?(0,t.createElement)("img",{className:"fr-responsive-img",src:e.imageUrl,alt:e.imageAlt}):(0,o.__)("Ajouter une image","wp-dsfr-blocks"))}))))))},save:function({attributes:e}){const r=e.displayImage&&e.imageUrl,l=d(e.cite)?e.cite:"",a={"fr-quote--column":e.displayImage};e.color&&(a["fr-quote--"+e.color]=!0);const o=n.useBlockProps.save({className:m()(a)});return p(o,"fr-quote"),(0,t.createElement)("figure",{...o},(0,t.createElement)("blockquote",{cite:l},(0,t.createElement)(n.RichText.Content,{tagName:"p",className:e.quoteSize?"fr-text--"+e.quoteSize:"",value:e.quote})),(0,t.createElement)("figcaption",null,(0,t.createElement)(n.RichText.Content,{tagName:"p",className:"fr-quote__author",value:e.author}),e.sources.length?(0,t.createElement)("ul",{className:"fr-quote__source"},e.sources.map(((e,r)=>e?(0,t.createElement)(n.RichText.Content,{tagName:"li",value:e,key:r}):""))):"",r&&(0,t.createElement)("div",{className:"fr-quote__image"},(0,t.createElement)("img",{className:"fr-responsive-img",src:e.imageUrl,alt:e.imageAlt}))))}})})()})();