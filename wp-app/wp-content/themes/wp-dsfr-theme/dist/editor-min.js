(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};(()=>{const t=window.wp.domReady;var r=e.n(t);const o=window.wp.hooks,s=window.wp.blocks;function a(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(e){let t,r;return!1!==a(e)&&(t=e.constructor,void 0===t||(r=t.prototype,!1!==a(r)&&!1!==r.hasOwnProperty("isPrototypeOf")))}function n(){const e=arguments,t="boolean"==typeof e[0],r=!!t&&e[0],o=t?1:0,s=l(e[o])?e[o]:{};var a,i;for(a=o+1;a<e.length;a++)for(i in e[a])r&&l(e[a][i])?s[i]=n(!0,{},s[i],e[a][i]):void 0!==e[a][i]&&(s[i]=e[a][i]);return s}const{createHigherOrderComponent:i}=wp.compose,{InspectorControls:d,BlockControls:c}=wp.blockEditor,{createElement:u,Fragment:b}=wp.element,{PanelBody:p,ToolbarGroup:h,ToolbarButton:f}=wp.components;let g=0;class S{constructor(e,t){this._targets="string"==typeof e?[e]:e,this._id="gutenberg-block-wrapper-"+g++,this._settings=n(!0,{},S.defaults,t),this._sidebarPanelBodies={},this._toolbarGroups={},wp.hooks.addFilter("blocks.registerBlockType",this._id,((e,t)=>this._targets.includes(t)?n(!0,e,{attributes:this._settings.additionalAttributes}):e)),wp.hooks.addFilter("editor.BlockEdit",this._id,i((e=>t=>{const{name:r,attributes:o}=t,s=m(t,"wrapped-element");if(!this._targets.includes(r)||!this._settings.blockFilter(r,o))return u(e,t);const a=[u(e,s)];return this.hasSidebarPanelBody()&&a.push(this.getSidebarInspectorControls(s)),this.hasToolbarGroup()&&a.push(this.getToolbarBlockControls(s)),u(b,{key:this._id},a)}),this._id))}getId(){return this._id}addAttributes(e){return Object.assign(this._settings.additionalAttributes,e),this}addSidebarPanelBody(e,t){return this._sidebarPanelBodies[e]={settings:t,children:[]},this}hasSidebarPanelBody(){return Object.keys(this._sidebarPanelBodies).length>0}getSidebarInspectorControls({name:e,attributes:t,setAttributes:r}){const o=[];for(let s in this._sidebarPanelBodies){let a=[];this._sidebarPanelBodies[s].children.forEach((function(o,s){a.push(u(wp.components[o.controlType],m(o.getControlSettings(e,t,r),s)))})),o.push(u(p,m(this._sidebarPanelBodies[s].settings,s),a))}return u(d,{key:"sideBarInspectorControls"},o)}addSidebarControl(e,t,r){return this._sidebarPanelBodies[e].children.push({controlType:t,getControlSettings:r}),this}addSidebarClassSelector(e,t){return this.addSidebarControl(e,"SelectControl",(function(e,r,o){let s="",a=!1;return r.className||(r.className=""),t.options.forEach((function({value:e}){""!==e?r.className.split(" ").indexOf(e)>-1&&(s=e):a=!0})),a||s||(s=t.options[0].value,o({className:r.className+" "+s})),n({value:s,onChange:e=>{if(s&&!r.className.split(" ").includes(s))return void(s="");let t=r.className.replace(s,"").replace(/\s+/g," ").trim();""!==e&&(t+=" "+e),o({className:t})}},t)})),this}addToolbarGroup(e){return this._toolbarGroups[e]=[],this}hasToolbarGroup(){return Object.keys(this._toolbarGroups).length>0}getToolbarBlockControls({name:e,attributes:t,setAttributes:r}){const o=[];for(let s in this._toolbarGroups){const a=[];this._toolbarGroups[s].forEach((function(o,s){a.push(u(f,m(o(e,t,r),s)))})),o.push(u(h,{key:s},a))}return u(c,{key:"toolbarBlockControls"},o)}addToolbarButton(e,t){this._toolbarGroups[e].push(t)}}function m(e,t){return Object.assign({key:t},e)}S.defaults={blockFilter:()=>!0,additionalAttributes:{}};const w=S;function y(e){const t=[{value:"",label:"Defaut"}];for(let r in window.dsfrData.editorColors)t.push({value:e+r,label:window.dsfrData.editorColors[r]});return t}r()((()=>{(0,s.unregisterBlockStyle)("core/button",["outline"]),(0,s.unregisterBlockStyle)("core/separator",["wide","dots"]);const e=["youtube","vimeo","dailymotion"];(0,s.getBlockVariations)("core/embed").forEach((t=>{e.includes(t.name)||(0,s.unregisterBlockVariation)("core/embed",t.name)}))})),window.acf,(0,o.addFilter)("blocks.registerBlockType","beapi-framework",(function(e,t){return"core/paragraph"===t&&(e.example.attributes.dropCap=!1),"core/separator"!==t&&"core/quote"!==t&&"core/pullquote"!==t&&"core/table"!==t||(e.styles=[]),"core/image"===t&&(e.styles=[],e.attributes.align={type:"string"}),e}));const k=new w("core/list-item",{blockFilter:function(e,t){return/fr-badge/g.test(t.className)}});k.addSidebarPanelBody("dsfr-panel",{title:"DSFR"}),k.addSidebarClassSelector("dsfr-panel",{label:"Classe css de couleur",options:y("fr-badge--")});const B=new w("core/paragraph",{blockFilter:function(e,t){return/fr-badge/g.test(t.className)}});B.addSidebarPanelBody("dsfr-panel",{title:"DSFR"}),B.addSidebarClassSelector("dsfr-panel",{label:"Classe css de couleur",options:y("fr-badge--")});const C=new w("core/group",{blockFilter:function(e,t){return/fr-callout/g.test(t.className)}});C.addSidebarPanelBody("dsfr-panel",{title:"DSFR"}),C.addSidebarClassSelector("dsfr-panel",{label:"Classe css de couleur",options:y("fr-callout--")});const _=new w("core/group",{blockFilter:function(e,t){return/fr-highlight/g.test(t.className)}});_.addSidebarPanelBody("dsfr-panel",{title:"DSFR"}),_.addSidebarClassSelector("dsfr-panel",{label:"Classe css de couleur",options:y("fr-highlight--")});const P=new w("core/group",{blockFilter:function(e,t){return/fr-alert/g.test(t.className)}});P.addSidebarPanelBody("dsfr-panel",{title:"DSFR"}),P.addSidebarClassSelector("dsfr-panel",{label:"Classe css du type d'alerte",options:[{value:"",label:"Défaut"},{value:"fr-alert--info",label:"Information"},{value:"fr-alert--success",label:"Succès"},{value:"fr-alert--error",label:"Erreur"},{value:"fr-alert--warning",label:"Avertissement"}]});const v=new w("core/table");v.addSidebarPanelBody("dsfr-panel",{title:"DSFR"}),v.addSidebarClassSelector("dsfr-panel",{label:"Classe css de couleur",options:y("fr-table--")}),window.dsfrData.classes={GutenbergBlockWrapper:w},window.dsfrData.utils={getDsfrColors:y}})()})();